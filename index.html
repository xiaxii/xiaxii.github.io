<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-X.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-X.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="Xi XIA's Blog" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="Xi XIA&#39;s Blog">
<meta property="og:url" content="https://xiaxii.github.io/index.html">
<meta property="og:site_name" content="Xi XIA&#39;s Blog">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Xi XIA&#39;s Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: 'CWQ8BGCUZ7',
      apiKey: 'be2086cbddc646c4027a56c1573319d8',
      indexName: 'test_blog',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://xiaxii.github.io/">





  <title>Xi XIA's Blog</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
<a href="https://github.com/xiaxii" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Xi XIA's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">notes of study and life</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
        
            

  

  
  
  
  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxii.github.io/2021/01/09/Quantative-Risk-Management-3-4-Estimating-and-identifying-risk/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xi XIA">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xi XIA's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/01/09/Quantative-Risk-Management-3-4-Estimating-and-identifying-risk/" itemprop="url">Quantative Risk Management 3/4 Estimating and identifying risk</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-01-09T19:53:35-05:00">
                2021-01-09
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2021-01-09T23:12:09-05:00">
                2021-01-09
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>3/4 objectives:</p>
<ol>
<li>estimate risk measures using parametric estimation and historical real-world data. </li>
<li>discover how Monte Carlo simulation can help you predict uncertainty. </li>
<li>learn how the global financial crisis signaled that randomness itself was changing, by understanding structural breaks and how to identify them.</li>
</ol>
<h1 id="Parameter-Estimation"><a href="#Parameter-Estimation" class="headerlink" title="Parameter Estimation"></a>Parameter Estimation</h1><h2 id="A-class-of-distribution"><a href="#A-class-of-distribution" class="headerlink" title="A class of distribution"></a>A class of distribution</h2><p>theta: the vector of unknown <strong>parameters</strong><br><img src="https://raw.githubusercontent.com/xiaxii/MarkdownPhotos/master/risk%20management/15.%20A%20class%20of%20distributions.png" alt="A class of distribution"></p>
<h2 id="Fitting-a-distribution"><a href="#Fitting-a-distribution" class="headerlink" title="Fitting a distribution"></a>Fitting a distribution</h2><p>Fit distribution according to error-minimizing criteria</p>
<ul>
<li>Example: <code>scipy.stats.norm.fit()</code>, fitting Normal distribution to data</li>
<li>Result: optimally fitted mean and standard deviation</li>
</ul>
<p>Advantages:</p>
<ul>
<li>Visualize difference between data and estimate using histogram</li>
<li>Provide goodness-of-fit test</li>
</ul>
<h2 id="Goodness-of-fit"><a href="#Goodness-of-fit" class="headerlink" title="Goodness of fit"></a>Goodness of fit</h2><p><img src="https://raw.githubusercontent.com/xiaxii/MarkdownPhotos/master/risk%20management/16.%20Goodness%20of%20fit%20example.png" alt="Goodness of fit Example"></p>
<p>norm: too wild<br>t: good, taller’ and ‘narrower’. </p>
<p>This means that the degrees of freedom of the T distribution, which is the number of independent observations, is estimated to be low. </p>
<p>Although the T distribution provides a good fit, the data is still not quite right. In particular, the histogram is not symmetrical: it’s a bit lopsided. </p>
<h2 id="Skewness-（偏度-偏态、偏态系数）"><a href="#Skewness-（偏度-偏态、偏态系数）" class="headerlink" title="Skewness （偏度/偏态、偏态系数）"></a>Skewness （偏度/偏态、偏态系数）</h2><p>Skewness: degree to which data is non-symmetrically distributed<br>是统计数据分布非对称程度的数字特征</p>
<p>We can test for skewness in the data by seeing how far data are from being symmetric. In Python we test for skewness using ‘skewtest’ from ‘scipy.stats’. The null hypothesis is that there is no skewness, indicating that a symmetric distribution is appropriate. After importing the test, it is applied to the loss data. The results indicate both the test statistic value and its significance level. In our example, a test statistic of -7.78 has a more than 99.9% confidence level, showing that the data has statistically significant skewness. Parametric estimation using a Skewed Normal distribution might then be appropriate.</p>
<p><img src="https://raw.githubusercontent.com/xiaxii/MarkdownPhotos/master/risk%20management/17.%20Testing%20skewness.png" alt="Skewness"></p>
<h2 id="Exercises"><a href="#Exercises" class="headerlink" title="Exercises"></a>Exercises</h2><h3 id="Parameter-estimation-Normal"><a href="#Parameter-estimation-Normal" class="headerlink" title="Parameter estimation: Normal"></a>Parameter estimation: Normal</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Import the Normal distribution and skewness test from scipy.stats</span></span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> norm, anderson</span><br><span class="line"></span><br><span class="line"><span class="comment"># Fit portfolio losses to the Normal distribution</span></span><br><span class="line">params = norm.fit(losses)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Compute the 95% VaR from the fitted distribution, using parameter estimates</span></span><br><span class="line">VaR_95 = norm.ppf(<span class="number">0.95</span>, *params)</span><br><span class="line">print(<span class="string">"VaR_95, Normal distribution: "</span>, VaR_95)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Test the data for Normality</span></span><br><span class="line">print(<span class="string">"Anderson-Darling test result: "</span>, anderson(losses))</span><br></pre></td></tr></table></figure>
<p>结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VaR_95, Normal distribution:  0.07376954007991526</span><br><span class="line">Anderson-Darling test result:  AndersonResult(statistic=30.302775165424237, critical_values=array([0.573, 0.653, 0.783, 0.913, 1.086]), significance_level=array([15. , 10. ,  5. ,  2.5,  1. ]))</span><br></pre></td></tr></table></figure></p>
<h3 id="Parameter-estimation-Skewed-Normal"><a href="#Parameter-estimation-Skewed-Normal" class="headerlink" title="Parameter estimation: Skewed Normal"></a>Parameter estimation: Skewed Normal</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Import the skew-normal distribution and skewness test from scipy.stats</span></span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> skewnorm, skewtest</span><br><span class="line"></span><br><span class="line"><span class="comment"># Test the data for skewness</span></span><br><span class="line">print(<span class="string">"Skewtest result: "</span>, skewtest(losses))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Fit the portfolio loss data to the skew-normal distribution</span></span><br><span class="line">params = skewnorm.fit(losses)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Compute the 95% VaR from the fitted distribution, using parameter estimates</span></span><br><span class="line">VaR_95 = skewnorm.ppf(<span class="number">0.95</span>, *params)</span><br><span class="line">print(<span class="string">"VaR_95 from skew-normal: "</span>, VaR_95)</span><br></pre></td></tr></table></figure>
<p>结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Skewtest result:  SkewtestResult(statistic=-12.561846503056646, pvalue=3.4225103594408506e-36)</span><br><span class="line">VaR_95 from skew-normal:  0.06759217691716421</span><br></pre></td></tr></table></figure></p>
<h1 id="Historical-and-Monte-Carlo-Simulation"><a href="#Historical-and-Monte-Carlo-Simulation" class="headerlink" title="Historical and Monte Carlo Simulation"></a>Historical and Monte Carlo Simulation</h1><h2 id="Historical-simulation-in-Python"><a href="#Historical-simulation-in-Python" class="headerlink" title="Historical simulation in Python"></a>Historical simulation in Python</h2><p>Historical simulation: use past to predict future</p>
<p>VaR: start with returns in assets_returns<br>Compute <code>portfolio_returns</code> using portforlio <code>weights</code><br>Convert <code>portfolio_returns</code> into losses<br>VaR: compute <code>np.quantile()</code> for losses at a confidence level<br>Assume future distribution of losses is exactly the same as past (which may not be true)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">weights = [<span class="number">0.25</span>, <span class="number">0.25</span>, <span class="number">0.25</span>, <span class="number">0.25</span>]</span><br><span class="line">portfolio_returns = assets_returns.dot(weights)</span><br><span class="line">losses = -portfolio_returns</span><br><span class="line">VaR_95 = np.quantaile(losses, <span class="number">0.95</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Monte-Carlo-Simulation-in-Python"><a href="#Monte-Carlo-Simulation-in-Python" class="headerlink" title="Monte Carlo Simulation in Python"></a>Monte Carlo Simulation in Python</h2><p><strong>Monte Carlo Simulation: A powerful combination of parametric estimation and historical simulation</strong><br><img src="https://raw.githubusercontent.com/xiaxii/MarkdownPhotos/master/risk%20management/18.%20Monte%20Carlo%20Simulation%20step1.png" alt="step1"><br><img src="https://raw.githubusercontent.com/xiaxii/MarkdownPhotos/master/risk%20management/19.%20Monte%20Carlo%20Simulation%20step2.png" alt="step2"><br><img src="https://raw.githubusercontent.com/xiaxii/MarkdownPhotos/master/risk%20management/20.%20Monte%20Carlo%20Simulation%20step3.png" alt="step3"></p>
<h2 id="Simulating-asset-returns"><a href="#Simulating-asset-returns" class="headerlink" title="Simulating asset returns"></a>Simulating asset returns</h2><p>A more thorough (and common) approach is to <strong>simulate the returns</strong> for the individual assets in a portfolio, rather than just the portfolio’s total return.<br>This allows greater realism as each risk factor can contribute their own sample path.<br>In addition, risk factors can be <strong>correlated:</strong> the covariance matrix <code>e_cov</code> can be used to compute asset returns in the simulation procedure.</p>
<h2 id="Exercises-1"><a href="#Exercises-1" class="headerlink" title="Exercises"></a>Exercises</h2><h2 id="Historical-simulation"><a href="#Historical-simulation" class="headerlink" title="Historical simulation"></a>Historical simulation</h2><p>Historical simulation of VaR assumes that the distribution of historical losses is the same as the distribution of future losses. We’ll test if this is true for our investment bank portfolio by comparing the 95% VaR from 2005 - 2006 to the 95% VaR from 2007 - 2009.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create portfolio returns for the two sub-periods using the list of asset returns</span></span><br><span class="line">portfolio_returns = np.array([x.dot(weights) <span class="keyword">for</span> x <span class="keyword">in</span> asset_returns])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Derive portfolio losses from portfolio returns</span></span><br><span class="line">losses = - portfolio_returns</span><br><span class="line"></span><br><span class="line"><span class="comment"># Find the historical simulated VaR estimates</span></span><br><span class="line">VaR_95 = [np.quantile(x, <span class="number">0.95</span>) <span class="keyword">for</span> x <span class="keyword">in</span> losses]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Display the VaR estimates</span></span><br><span class="line">print(<span class="string">"VaR_95, 2005-2006: "</span>, VaR_95[<span class="number">0</span>], <span class="string">'; VaR_95, 2007-2009: '</span>, VaR_95[<span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<p>结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VaR_95, 2005-2006:  0.014687184472834514 ; VaR_95, 2007-2009:  0.05790574066814192</span><br></pre></td></tr></table></figure></p>
<h3 id="Monte-Carlo-Simulation"><a href="#Monte-Carlo-Simulation" class="headerlink" title="Monte Carlo Simulation"></a>Monte Carlo Simulation</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Initialize daily cumulative loss for the assets, across N runs</span></span><br><span class="line">daily_loss = np.zeros((<span class="number">4</span>,N))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create the Monte Carlo simulations for N runs</span></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> range(N):</span><br><span class="line">    <span class="comment"># Compute simulated path of length total_steps for correlated returns</span></span><br><span class="line">    correlated_randomness = e_cov @ norm.rvs(size = (<span class="number">4</span>,total_steps))</span><br><span class="line">    <span class="comment"># Adjust simulated path by total_steps and mean of portfolio losses</span></span><br><span class="line">    steps = <span class="number">1</span>/total_steps</span><br><span class="line">    minute_losses = mu * steps + correlated_randomness * np.sqrt(steps)</span><br><span class="line">    daily_loss[:, n] = minute_losses.sum(axis=<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># Generate the 95% VaR estimate</span></span><br><span class="line">losses = weights @ daily_loss</span><br><span class="line">print(<span class="string">"Monte Carlo VaR_95 estimate: "</span>, np.quantile(losses, <span class="number">0.95</span>))</span><br></pre></td></tr></table></figure>
<p>结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Monte Carlo VaR_95 estimate:  0.0032448493079297045</span><br></pre></td></tr></table></figure></p>
<h1 id="Structural-breaks"><a href="#Structural-breaks" class="headerlink" title="Structural breaks"></a>Structural breaks</h1><p>在计量经济学和统计学中，结构性折断是回归模型参数随时间的意外变化，通常会导致巨大的预测误差和模型的不可靠性。</p>
<h2 id="Risk-and-distribution"><a href="#Risk-and-distribution" class="headerlink" title="Risk and distribution"></a>Risk and distribution</h2><p>Risk management toolkit:</p>
<ul>
<li>Risk mitigation: MPT</li>
<li>Risk measurement: VaR, CVaR</li>
</ul>
<p>Risk: dispersion, volatility</p>
<ul>
<li>Variance (standard deviation) as risk definition</li>
</ul>
<p>Connection bewteen _risk_ and _<strong>distribution</strong> of risk factors_ as random variables</p>
<h2 id="Stationarty-平稳性"><a href="#Stationarty-平稳性" class="headerlink" title="Stationarty (平稳性)"></a>Stationarty (平稳性)</h2><p>Assumption: distribution is the same over time<br>Unchanging distribution = stationary<br>Global financial crisis period efficient frontier —&gt; not stationary</p>
<p>Estimation techniques require <strong>stationarity</strong>:</p>
<ul>
<li>Historical: unknown stationary distribution from past data</li>
<li>Parametric: assumed stationary distribution class</li>
<li>Monte Carlo: assumed stationary distribution for random draws</li>
</ul>
<h2 id="Structural-breaks-1"><a href="#Structural-breaks-1" class="headerlink" title="Structural breaks"></a>Structural breaks</h2><p>If we knew that the distribution was changing over time, and we knew when distribution changes occur, then we could estimate our risk measures only during <strong>sub-periods</strong> when the distribution didn’t change.<br>In other words, distributions would be <strong>stationary only within certain sub-periods of the data</strong>. </p>
<p>Structural breaks: points of change<br>— change in “trend” of average and/or volatility of data</p>
<h2 id="Example-China’s-population-growth"><a href="#Example-China’s-population-growth" class="headerlink" title="Example: China’s population growth"></a>Example: China’s population growth</h2><p>As an example of a structural break, let’s examine the population growth rate of China from 1950 to 2019. We can see that the growth is relatively linear over this period…</p>
<p>…but around 1990 the growth rate slows down. This indicates that there may be a structural break around 1990. </p>
<p>In other words, the underlying distribution of net population gains (births minus deaths) changed, causing there to be fewer net gains from 1990 onwards. Some reasons for such a change could be changes in government policy, changes in living standards, and other micro- and macro-level factors.</p>
<p><img src="https://raw.githubusercontent.com/xiaxii/MarkdownPhotos/master/risk%20management/21.%20China%20population.png" alt="China Population"></p>
<h2 id="The-Chow-test"><a href="#The-Chow-test" class="headerlink" title="The Chow test"></a>The Chow test</h2><p>Previous example: A visual examination is useful to identify structural breaks.<br>the “Chow Test”: statistical measurement, which asks if the data support a <strong>structural break</strong> at a given break point of time, for a given <strong>linear risk factor model</strong>. </p>
<p>Null hypothesis: no structural break. </p>
<p>In the test, 3 ordinary least squares (OLS) regressions are performed: </p>
<ol>
<li>one for the entire period,</li>
<li>two for before and after the break point.<br>The sum-of-squared residuals are then collected, and the Chow test statistic is created. The statistic is distributed as an “F”-distribution statistic.</li>
</ol>
<h2 id="The-Chow-test-in-Python"><a href="#The-Chow-test-in-Python" class="headerlink" title="The Chow test in Python"></a>The Chow test in Python</h2><p>Let’s use the Chow test to see if there was a structural break somewhere around 1990 in China’s population growth. We’ll use a very simple <strong>“factor model”</strong> where log-population is regressed against year. </p>
<ol>
<li>an OLS regression over the 1950 - 2019 period, regressing the natural logarithm of population against year and an intercept. This gives our ‘baseline’ regression, <strong>assuming no structural break</strong>. The _sum-of-squared residuals（残差平方和）_ from the regression are stored. </li>
<li>Break 1950-2019 into <strong>1950-1989</strong> and <strong>1990-2019</strong> sub-periods and perform OLS regression on each sub period </li>
</ol>
<p><img src="https://raw.githubusercontent.com/xiaxii/MarkdownPhotos/master/risk%20management/22.%20The%20Chow%20test1.png" alt><br><img src="https://raw.githubusercontent.com/xiaxii/MarkdownPhotos/master/risk%20management/23.%20The%20Chow%20test2.png" alt><br>*ssr: Sum of squared (whitened) residuals. 残差平方和：它被用作参数选择和模型选择的最优准则。</p>
<ol>
<li>Finally, we compute the Chow test statistic using the three sum of squared residuals and the degrees of freedom of the test. The Chow test statistic should be distributed as an “F” distribution. The “F” distribution has two degrees of freedom: </li>
</ol>
<ul>
<li>The first (used in the numerator) is the number of regression parameters, here equal to 2: the intercept and slope coefficient. </li>
<li>The second (used in the denominator), is the total number of data points, 70, minus twice the first degree of freedom, or 70 minus 4, which is 66.<br><img src="https://raw.githubusercontent.com/xiaxii/MarkdownPhotos/master/risk%20management/24.%20The%20Chow%20test3.png" alt></li>
</ul>
<p>The computed test statistic is statistically different from zero at the 99.9% confidence level. We can reject the null hypothesis that there was no structural break in the data.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


        
    
        
            

  

  
  
  
  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxii.github.io/2021/01/09/Quantative-Risk-Management-2-4-Goal-oriented-risk-management/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xi XIA">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xi XIA's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/01/09/Quantative-Risk-Management-2-4-Goal-oriented-risk-management/" itemprop="url">Quantative Risk Management 2/4 - Goal-oriented risk management</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-01-09T15:59:14-05:00">
                2021-01-09
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2021-01-09T19:56:56-05:00">
                2021-01-09
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><strong>2/4 Object:</strong></p>
<ol>
<li>expand your portfolio optimization toolkit with risk measures such as Value at Risk (VaR) and Conditional Value at Risk (CVaR)</li>
<li>use specialized Python libraries including pandas, scipy, and pypfopt. </li>
<li>how to mitigate risk exposure using the Black-Scholes model to hedge an options portfolio.</li>
</ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2021/01/09/Quantative-Risk-Management-2-4-Goal-oriented-risk-management/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


        
    
        
            

  

  
  
  
  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxii.github.io/2021/01/09/Quantative-Risk-Management-1-4-Risk-and-Return/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xi XIA">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xi XIA's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/01/09/Quantative-Risk-Management-1-4-Risk-and-Return/" itemprop="url">Quantative Risk Management 1/4 - Risk and Return</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-01-09T02:43:55-05:00">
                2021-01-09
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2021-01-09T02:47:45-05:00">
                2021-01-09
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p><strong>Datacamp:</strong> <a href="https://campus.datacamp.com/courses/quantitative-risk-management-in-python" target="_blank" rel="noopener">https://campus.datacamp.com/courses/quantitative-risk-management-in-python</a></p>
<p><strong>Course Description</strong><br>Managing risk using Quantitative Risk Management is a vital task across the banking, insurance, and asset management industries. It’s essential that financial risk analysts, regulators, and actuaries can quantitatively balance rewards against their exposure to risk. This course introduces you to financial portfolio risk management through an examination of the 2007—2008 financial crisis and its effect on investment banks such as Goldman Sachs and J.P. Morgan. You’ll learn how to use Python to calculate and mitigate risk exposure using the Value at Risk and Conditional Value at Risk measures, estimate risk with techniques like Monte Carlo simulation, and use cutting-edge technologies such as neural networks to conduct real time portfolio rebalancing.</p>
</blockquote>
<p><strong>1/4 Object: </strong></p>
<ol>
<li>understanding of risk and return</li>
<li>how risk and return are related to each other, </li>
<li>identify risk factors, and use them to re-acquaint ourselves with Modern Portfolio Theory applied to the global financial crisis of 2007-2008.</li>
</ol>
<hr>
<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><ul>
<li>Quantitative Risk Management: Study of quantifiable <strong>uncertainty</strong></li>
<li>Uncertainty: (1) Future outcome (2) Outcomes impact planning decisions</li>
<li>Risk Management: mitigate (reduce effects of) adverse outcomes</li>
<li>Quantifiable uncertainty: identify <strong>fators to measure risk</strong> (what factors can cause the uncertainty)</li>
<li>This project: Focus upon risk associated with a <em>financial portfolio</em></li>
</ul>
<h2 id="This-project"><a href="#This-project" class="headerlink" title="This project"></a>This project</h2><p><strong>The Great Recession (2007-2010)</strong></p>
<ul>
<li>Global growth loss more than $2 trillion</li>
<li>United States: nearly $10 trillion lost in household wealth</li>
<li>U.S. stock markets lost c. $8 trillion in value</li>
</ul>
<p><strong>Global Finacial Crisis (2007-2009)</strong></p>
<ul>
<li>Large-scale changes in fundamental asset values</li>
<li>Massive uncertainty about future returns</li>
<li>High asset returns volatility</li>
<li>Risk management critical to success or failure</li>
</ul>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2021/01/09/Quantative-Risk-Management-1-4-Risk-and-Return/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


        
    
        
            

  

  
  
  
  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxii.github.io/2020/11/26/Data-AI/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xi XIA">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xi XIA's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/11/26/Data-AI/" itemprop="url">Data & AI</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-11-26T13:05:12-05:00">
                2020-11-26
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-12-02T21:31:13-05:00">
                2020-12-02
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Unlock-Value-of-Disparate-and-Complex-Data"><a href="#Unlock-Value-of-Disparate-and-Complex-Data" class="headerlink" title="Unlock Value of Disparate and Complex Data"></a>Unlock Value of Disparate and Complex Data</h1><blockquote>
<p>Azure Databricks: <a href="https://www.youtube.com/watch?v=RatIt99GwRc" target="_blank" rel="noopener">Unlock Value of Disparate and Complex Data Powered by Azure Databricks Luke Pritchard Avanade, Inc</a></p>
</blockquote>
<h2 id="Vision-of-Avanade-Inc"><a href="#Vision-of-Avanade-Inc" class="headerlink" title="Vision of Avanade Inc."></a>Vision of Avanade Inc.</h2><p>To be the leading digital innovator realizing results for our clients through the power of people and the Microsoft ecosystem</p>
<h2 id="The-market-and-clients"><a href="#The-market-and-clients" class="headerlink" title="The market and clients"></a>The market and clients</h2><ul>
<li>Unlock the <strong>value of data at scale</strong></li>
<li>Get off <strong>restrictive legacy systems</strong> and create <strong>new business models</strong></li>
<li>Differentiate in the market</li>
</ul>
<h2 id="The-approach"><a href="#The-approach" class="headerlink" title="The approach"></a>The approach</h2><ol>
<li>Value and design led approach</li>
<li>Outcome-based experiments using fast flexible technology </li>
<li>Once value is proven, scale and industrialize</li>
<li>Continue to expand to multiple value</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left">Database and Data Factory</th>
<th style="text-align:left">Data Engineering and Data Analytics</th>
<th style="text-align:left">Business Insight</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">System</td>
<td style="text-align:left">Azure SQL DB</td>
<td style="text-align:left">Azure Analysis Service</td>
<td style="text-align:left">Visualization</td>
</tr>
<tr>
<td style="text-align:left">Implementation</td>
<td style="text-align:left">Python, Databricks, Cloud</td>
<td style="text-align:left">Power BI, Excel</td>
<td style="text-align:left">PPT</td>
</tr>
</tbody>
</table>
</div>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/11/26/Data-AI/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


        
    
        
            

  

  
  
  
  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxii.github.io/2020/11/25/Digital-Marketing-2-2-Inbounding-Marketing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xi XIA">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xi XIA's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/11/25/Digital-Marketing-2-2-Inbounding-Marketing/" itemprop="url">Digital Marketing 2/2 - Inbounding Marketing</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-11-25T22:59:37-05:00">
                2020-11-25
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-11-26T01:20:28-05:00">
                2020-11-26
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Inbound-Marketing"><a href="#Inbound-Marketing" class="headerlink" title="Inbound Marketing"></a>Inbound Marketing</h1><p>Inbound marketing position the company as a target that consumers are searching for.</p>
<p>Why Inbound Marketing:</p>
<ol>
<li>the diminished influence of advertising</li>
<li>the rise of consumer search</li>
</ol>
<p>Inbound marketing is a way to <strong>engage consumers</strong> by creating content, including blogs, podcasts, white papers, and search engine optimization (SEO), so that a company - its brand, products, and services - <strong>is found when consumers search for information</strong>.</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/11/25/Digital-Marketing-2-2-Inbounding-Marketing/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


        
    
        
            

  

  
  
  
  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxii.github.io/2020/10/30/Digital-Marketing-1-2-Outbounding-Marketing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xi XIA">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xi XIA's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/10/30/Digital-Marketing-1-2-Outbounding-Marketing/" itemprop="url">Digital Marketing 1/2 - Outbound Marketing</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-10-30T23:09:51-04:00">
                2020-10-30
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-11-26T00:37:09-05:00">
                2020-11-26
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Product-Mangement/" itemprop="url" rel="index">
                    <span itemprop="name">Product Mangement</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>Harvard Business Review </p>
</blockquote>
<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>How do new entrants in consumer product industry rise?</p>
<ul>
<li>Distribution</li>
<li>Advertising</li>
</ul>
<p>Digital technologies like <strong>digital cookies</strong>, <strong>content-curation websites</strong> (Reddit, BuzzFeed) and <strong>content-sharing websites</strong> (Slideshare, LinkedIn, Medium) lead to a new level of self-expression of individuals. Thus companies can better understand customers’ decision journey and subsequent word-of-mouth.</p>
<p>Digital Marketing landscape:</p>
<ul>
<li>Paid Media: TV commercial and Google Ads</li>
<li>Owned Media: Official Websites</li>
<li>Earned Media: Influncial customers, word-of-mounth</li>
<li>Review Websites: Lyft…</li>
</ul>
<p>Digital Marketing Framework:</p>
<ul>
<li><strong>Outbound Marketing</strong>: company -&gt; customer —&gt; Search Enginee Maerketing (SEM)</li>
<li><strong>Inbound Markeying</strong>: customer -&gt; product and service —&gt; Search Enginee Optimization (SEO)</li>
<li><strong>Social Media</strong>: customers create contents</li>
<li><strong>Mobile Technology</strong>: the way customers search for and biut products and services</li>
</ul>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/10/30/Digital-Marketing-1-2-Outbounding-Marketing/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


        
    
        
            

  

  
  
  
  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxii.github.io/2020/10/01/AWS-Solotions-Architect-Associate-Prep-01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xi XIA">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xi XIA's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/10/01/AWS-Solotions-Architect-Associate-Prep-01/" itemprop="url">AWS Solotions Architect Associate Prep 01</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-10-01T21:59:44-04:00">
                2020-10-01
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-10-18T11:55:48-04:00">
                2020-10-18
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Cloud/" itemprop="url" rel="index">
                    <span itemprop="name">Cloud</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Cloud-Computing"><a href="#Cloud-Computing" class="headerlink" title="Cloud Computing"></a>Cloud Computing</h1><p>On-demand delivery of a service (or set of services) via a platform on the internet</p>
<p>Users &lt;-&gt; Cloud Service &lt;-&gt; Cloud Computing</p>
<p>Advantages of Cloud Computing:</p>
<ol>
<li><strong>Less Capital Expenditure</strong>: No waste if this cloud service is obly used for a period of time, Pay less</li>
<li><strong>Pay-per-use</strong>: Only pay when it’s needed</li>
<li>Easy to update, less fee for upgrading the service</li>
<li><strong>Benefit of massive ecomonies of scale</strong>: Easy to switch region, Easy to share, Moniter the access to your service</li>
<li><strong>Focus more on the application, rather than maintaining the infrastructure</strong>: No need to keep the resource as your own property, Sercurity garanteed</li>
</ol>
<h1 id="AWS"><a href="#AWS" class="headerlink" title="AWS"></a>AWS</h1><p>Why AWS?</p>
<ol>
<li>Clear market leader</li>
<li>Breadth of services: computing, storage, network </li>
<li>Security: physical, operational</li>
<li>Flexibility: database, language, web-application platform -&gt; easy migration process</li>
<li>Easy to use</li>
<li>Cost-effective</li>
<li>Reliability</li>
<li>Scalability and high performance</li>
<li>Hybrid Capabilities</li>
</ol>
<h1 id="AWS-Certified-Solutions-Architect-–-Associate"><a href="#AWS-Certified-Solutions-Architect-–-Associate" class="headerlink" title="AWS Certified Solutions Architect – Associate"></a>AWS Certified Solutions Architect – Associate</h1><p>AWS Services (focus in the <a href="https://aws.amazon.com/certification/certified-solutions-architect-associate/" target="_blank" rel="noopener">exam</a>)</p>
<ol>
<li>Compute: AWS EC2. Elastic Registry, AWS Lambda</li>
<li>Storage: Amazon S3, Amazon Glacier</li>
<li>Database: Amazon RDS. Amazon DynamoDB, Amazon Redshift</li>
<li>Network and Content Delivery: Amazon VPC, Amazon CloudFront, AWS Direct Connect, Elatic Load Balancing, Amazon Route 53</li>
<li>Security, Identioty &amp; Compliance: AWS Idendtity &amp; Access Management</li>
<li>Management and Governance: CloudWatch, Cloud Trial, Aotoscaling, CloudFormation, Config, Truste Advisor</li>
<li>Analytics: Anmazon Kinesis</li>
<li>Application Integration: SQS, SNS, SWF</li>
</ol>
<p>Study Resources:<br><a href="https://aws.amazon.com/architecture/well-architected/?wa-lens-whitepapers.sort-by=item.additionalFields.sortDate&amp;wa-lens-whitepapers.sort-order=desc" target="_blank" rel="noopener">AWS Well-Architected Framework</a> (white papers!!!)<br><a href="https://aws.amazon.com/faqs/" target="_blank" rel="noopener">AWS FAQ</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


        
    
        
            

  

  
  
  
  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxii.github.io/2020/09/20/Leadership-Reflections/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xi XIA">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xi XIA's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/09/20/Leadership-Reflections/" itemprop="url">Leadership Reflections </a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-09-20T01:10:57-04:00">
                2020-09-20
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-09-20T01:16:01-04:00">
                2020-09-20
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Product-Management/" itemprop="url" rel="index">
                    <span itemprop="name">Product Management</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>Customer-facing mission and vision bring effectiveness to the leadership. During our class of Leadeship, we learnt about the Five Questions Plan for businesses. </p>
<blockquote>
<ol>
<li>What is our mission?</li>
<li>Who is our customer?</li>
<li>What does the customer value?</li>
<li>What are our results?</li>
<li>What is our plan?</li>
</ol>
</blockquote>
<p>I consider identifying customers and their needs the most important. </p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/09/20/Leadership-Reflections/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


        
    
        
            

  

  
  
  
  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxii.github.io/2020/09/09/KPI-and-Matrix/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xi XIA">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xi XIA's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/09/09/KPI-and-Matrix/" itemprop="url">KPI and Matrix</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-09-09T16:15:09-04:00">
                2020-09-09
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-09-20T01:16:59-04:00">
                2020-09-20
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Product-Management/" itemprop="url" rel="index">
                    <span itemprop="name">Product Management</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="General-mobile-app-KPIs"><a href="#General-mobile-app-KPIs" class="headerlink" title="General mobile app KPIs"></a>General mobile app KPIs</h1><ul>
<li>User engagement KPIs</li>
<li>Revenue KPIs</li>
<li>UX KPIs</li>
<li>Marketing KPIs</li>
<li>App store category ranking</li>
</ul>
<p>While all six categories are important, you first need to establish the most relevant KPIs and then focus on tracking them. Below are the top three indicators to look for in each category.</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/09/09/KPI-and-Matrix/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


        
    
        
            

  

  
  
  
  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://xiaxii.github.io/2020/09/05/Writing-Efficient-Python-Code/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xi XIA">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xi XIA's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/09/05/Writing-Efficient-Python-Code/" itemprop="url">Writing Efficient Python Code</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-09-05T22:43:07-04:00">
                2020-09-05
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-09-06T16:41:20-04:00">
                2020-09-06
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Foundations-for-efficiencies"><a href="#Foundations-for-efficiencies" class="headerlink" title="Foundations for efficiencies"></a>Foundations for efficiencies</h1><ol>
<li><p>Pythonic: Code that executes quickly for the task at hand, minimizes the memory footprint and follows Python’s coding style principles.</p>
</li>
<li><p>Example:</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Collect the names in the above list that have six letters or more.</span></span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> names:</span><br><span class="line">    <span class="keyword">if</span> len(name) &gt;= <span class="number">6</span>:</span><br><span class="line">        better_list.append(name)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Pythonic Way</span></span><br><span class="line">best_list = [name <span class="keyword">for</span> name <span class="keyword">in</span> names <span class="keyword">if</span> len(name) &gt;= <span class="number">6</span>]</span><br></pre></td></tr></table></figure>
<ol>
<li>Python Standard Library<br>(1) Built-in types: <code>list</code>, <code>tuple</code>, <code>set</code>, <code>dict</code>, and others<br>(2) Built-in functions: <code>print()</code>, <code>len()</code>, <code>range()</code>, <code>round()</code>, <code>enumerate()</code>, <code>map()</code>, <code>zip()</code>, and others<br>(3) Built-in modules: <code>os</code>, <code>sys</code>, <code>itertools</code>, <code>collections</code>, <code>math</code> and others</li>
</ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/09/05/Writing-Efficient-Python-Code/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


        
    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="Xi XIA">
            
              <p class="site-author-name" itemprop="name">Xi XIA</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">31</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/xiaxii" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i></a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.linkedin.com/in/xiaxii/" target="_blank" title="LinkedIn">
                      
                        <i class="fa fa-fw fa-fab fa-linkedin"></i></a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xi XIA</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.4"></script>



  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  


    <!-- 代码块复制功能 -->
    <script type="text/javascript" src="/js/src/clipboard.min.js"></script>
    <script type="text/javascript" src="/js/src/clipboard-use.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
